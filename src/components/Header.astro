---

---

<header class="bg-base-100 border-b border-base-300 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-8 py-4">
        <div class="flex items-center justify-between">
            <!-- Logo agrandi à w-24 h-24 -->
            <div class="flex items-center">
                <div class="w-24 h-24 flex items-center justify-center">
                    <img
                        src="/src/assets/logo.svg"
                        alt="Ta Vue Logo"
                        class="w-full h-full"
                    />
                </div>
            </div>

            <!-- Navigation -->
            <nav class="hidden md:flex items-center gap-12">
                <a
                    href="/configurateur"
                    class="text-base-content hover:text-primary transition font-medium"
                    >Configurateur</a
                >
                <a
                    href="/generateur"
                    class="text-base-content hover:text-primary transition font-medium"
                    >Générer avec IA</a
                >
                <a
                    href="/collection"
                    class="text-base-content hover:text-primary transition font-medium"
                    >Collection</a
                >
            </nav>

            <!-- Added logout button that appears when user is connected -->
            <div class="flex items-center gap-4">
                <button
                    id="auth-status-btn"
                    class="btn btn-secondary btn-sm h-8 text-sm border-[1px] border-black"
                >
                    Vous n'êtes pas connecté
                </button>
                <button
                    id="logout-btn"
                    class="btn btn-error btn-sm h-8 text-sm border-[1px] border-black hidden"
                >
                    Se déconnecter
                </button>
            </div>
        </div>
    </div>
</header>

<script>
    import pb from "../utils/pb";

    const authStatusBtn = document.getElementById("auth-status-btn");
    const logoutBtn = document.getElementById("logout-btn");

    if (authStatusBtn) {
        authStatusBtn.addEventListener("click", () => {
            if (!pb.authStore.isValid) {
                window.location.href = "/";
            }
        });
    }

    if (pb.authStore.isValid && pb.authStore.model) {
        const user = pb.authStore.model;
        if (authStatusBtn) {
            authStatusBtn.textContent = `Bonjour ${user.prenom || user.nom || "Utilisateur"}`;
        }
        if (logoutBtn) {
            logoutBtn.classList.remove("hidden");
        }
    }

    if (logoutBtn) {
        logoutBtn.addEventListener("click", () => {
            pb.authStore.clear();
            window.location.href = "/";
        });
    }
</script>
